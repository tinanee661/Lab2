
@{
    ViewData["Title"] = "Calendar";
}

@section Scripts {
    <script type="text/javascript">
        function GetEventsOnPageLoad() {
            $('#calendar').fullCalendar({
                header: {
                    left: 'prev, next oday',
                    center: 'title',
                    right: 'month, agendaWeek, agendaDay',
                },
                buttonText: {
                    today: 'Today',
                    month: 'Month',
                    week: 'Week',
                    day: 'Day'
                },
                selectable: true,
                select: function () {
                    /*showModal('Create an Event', 'Bind your information to navbigate aNY pAge', null);*/
                },
                height: 'parent',
                events: function (start, end, timezone, callback) {
                    $.ajax({
                        type: 'GET',
                        contentType: "application/json",
                        url: "Calendar/GetEventData",
                        dataType: "JSON",
                        success: function (data) {
                            var events = [];
                            $.each(data, function (i, data) {
                                console.log(data);
                                events.push({
                                    title: data.name+" - "+data.email,
                                    start: moment(data.startdate).format("YYYY-MM-DD HH:mm:ss"),
                                    end: moment(data.enddate).format("YYYY-MM-DD HH:mm:ss"),
                                    backgroundColor: '#d05985',
                                    borderColor: 'black',
                                    id: data.id
                                });
                            });
                            callback(events);
                        }
                    });
                },
                nextDayThreshold: "00:00:00",
                editable: false,
                droppable: false,
                nowIndicator: true,
                eventClick: function (info) {
                    console.log(info);
                },
                eventDrop: function (info) {
                    console.log(info);
                },
                eventResize: function (info) {
                    console.log(info);
                },
            })
        }


        $(document).ready(function () {
            GetEventsOnPageLoad();
        });
    </script>
}

@section Styles {
    <style>
        .calendar-body {
            height: calc(100vh - 180px);
            width: 90%;
            padding-left: 130px;
            margin-top: 25px;
        }

        .calendar-header {
            padding-left: 30%;
        }
    </style>
}

<div class="calendar-body">
    <div id="calendar">
    </div>
</div>

